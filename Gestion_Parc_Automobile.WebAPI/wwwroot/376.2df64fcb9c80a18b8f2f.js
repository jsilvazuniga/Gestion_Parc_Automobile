(self.webpackChunkparc_automobile=self.webpackChunkparc_automobile||[]).push([[376],{376:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AdminModule:()=>E});var r=i(8583),o=i(4655),a=i(2238),n=i(4364),u=i(3679),l=i(4214),s=i(7716),c=i(1769),m=i(8295),d=i(9983),p=i(3220),f=i(1095);function Z(e,t){1&e&&(s.TgZ(0,"mat-error"),s._uU(1,"Champ obligatoire "),s.qZA())}function g(e,t){1&e&&(s.TgZ(0,"mat-error"),s._uU(1,"Champ obligatoire "),s.qZA())}let v=(()=>{class e{constructor(e,t){this.fb=e,this.dialogRef=t,this.currentDate=new Date}ngOnInit(){this.formReservation=this.fb.group({pickerDateDebut:[null,u.kI.required],pickerDateFin:[null,u.kI.required]})}enregistrer(){if(!this.formReservation.valid)return;let e=new l.Vs;e.dateDebut=this.formReservation.controls.pickerDateDebut.value,e.dateFin=this.formReservation.controls.pickerDateFin.value,this.dialogRef.close(e)}annuler(){this.dialogRef.close(null)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(u.qu),s.Y36(a.so))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-reserver-form"]],decls:27,vars:9,consts:[[1,"w-100",3,"formGroup"],[1,"pt-1","pb-2"],[1,"container"],[1,"row"],[1,"col-6"],[1,"w-100"],["matInput","","formControlName","pickerDateDebut","name","pickerDateDebut","placeholder","Date debut","required","",3,"min","matDatepicker"],["matSuffix","",3,"for"],["pickerDateDebut",""],[4,"ngIf"],["matInput","","formControlName","pickerDateFin","name","pickerDateFin","placeholder","Date fin","required","",3,"min","matDatepicker"],["pickerDateFin",""],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){if(1&e&&(s.TgZ(0,"form",0),s.TgZ(1,"h2"),s._uU(2,"Reservation"),s.qZA(),s._UZ(3,"mat-divider",1),s.TgZ(4,"div",2),s.TgZ(5,"div",3),s.TgZ(6,"div",4),s.TgZ(7,"mat-form-field",5),s._UZ(8,"input",6),s._UZ(9,"mat-datepicker-toggle",7),s._UZ(10,"mat-datepicker",null,8),s.YNc(12,Z,2,0,"mat-error",9),s.qZA(),s.qZA(),s.TgZ(13,"div",4),s.TgZ(14,"mat-form-field",5),s._UZ(15,"input",10),s._UZ(16,"mat-datepicker-toggle",7),s._UZ(17,"mat-datepicker",null,11),s.YNc(19,g,2,0,"mat-error",9),s.qZA(),s.qZA(),s.qZA(),s.TgZ(20,"div",3),s.TgZ(21,"div",4),s.TgZ(22,"button",12),s.NdJ("click",function(){return t.enregistrer()}),s._uU(23,"Reserver"),s.qZA(),s.qZA(),s.TgZ(24,"div",4),s.TgZ(25,"button",13),s.NdJ("click",function(){return t.annuler()}),s._uU(26,"Cancel"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.MAs(11),i=s.MAs(18);s.Q6J("formGroup",t.formReservation),s.xp6(8),s.Q6J("min",t.currentDate)("matDatepicker",e),s.xp6(1),s.Q6J("for",e),s.xp6(3),s.Q6J("ngIf",t.formReservation.controls.pickerDateDebut.hasError("required")),s.xp6(3),s.Q6J("min",t.currentDate)("matDatepicker",i),s.xp6(1),s.Q6J("for",i),s.xp6(3),s.Q6J("ngIf",t.formReservation.controls.pickerDateFin.hasError("required"))}},directives:[u._Y,u.JL,u.sg,c.d,m.KE,d.Nt,u.Fj,p.hl,u.JJ,u.u,u.Q7,p.nW,m.R9,p.Mq,r.O5,f.lW,m.TO],styles:[""]}),e})();var h=i(7441),q=i(2458);function b(e,t){1&e&&(s.TgZ(0,"mat-error"),s._uU(1,"Champ obligatoire"),s.qZA())}function A(e,t){1&e&&(s.TgZ(0,"mat-error"),s._uU(1,"Champ obligatoire"),s.qZA())}function T(e,t){1&e&&(s.TgZ(0,"mat-error"),s._uU(1,"Champ obligatoire"),s.qZA())}function _(e,t){1&e&&(s.TgZ(0,"mat-error"),s._uU(1,"Champ obligatoire "),s.qZA())}function k(e,t){if(1&e&&(s.TgZ(0,"mat-option",24),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.id),s.xp6(1),s.hij(" ",null==e?null:e.name,"")}}function C(e,t){if(1&e&&(s.TgZ(0,"mat-option",24),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.id),s.xp6(1),s.hij(" ",null==e?null:e.name,"")}}function N(e,t){if(1&e&&(s.TgZ(0,"mat-option",24),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.id),s.xp6(1),s.hij(" ",null==e?null:e.name,"")}}function U(e,t){if(1&e&&(s.TgZ(0,"mat-option",24),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.id),s.xp6(1),s.hij(" ",null==e?null:e.name,"")}}let M=(()=>{class e{constructor(e,t,i,r){this.fb=e,this.dialogRef=t,this.data=i,this._services=r,this.isCreation=!0,this.listeColeurs=[],this.listeMarques=[],this.listeModeles=[],this.listeStatut=[],this.data?(this.isCreation=!1,this.infoVoiture=this.data.data):this.isCreation=!0}ngOnInit(){var e,t,i,r,o,a,n,l,s,c,m,d,p,f;console.log(this.infoVoiture),this.formVoiture=this.fb.group({inputId:[null===(e=this.infoVoiture)||void 0===e?void 0:e.id],inputName:[null===(t=this.infoVoiture)||void 0===t?void 0:t.name,u.kI.required],inputKilometrage:[null===(i=this.infoVoiture)||void 0===i?void 0:i.kilometrage,u.kI.required],inputDateMiseEnCirculation:[null===(r=this.infoVoiture)||void 0===r?void 0:r.dateMiseEnCirculation,u.kI.required],inputColeur:[null===(a=null===(o=this.infoVoiture)||void 0===o?void 0:o.coleur)||void 0===a?void 0:a.id,u.kI.required],inputMarque:[null===(l=null===(n=this.infoVoiture)||void 0===n?void 0:n.marque)||void 0===l?void 0:l.id,u.kI.required],inputModele:[null===(c=null===(s=this.infoVoiture)||void 0===s?void 0:s.modele)||void 0===c?void 0:c.id,u.kI.required],inputStatut:[null===(d=null===(m=this.infoVoiture)||void 0===m?void 0:m.statut)||void 0===d?void 0:d.id,u.kI.required],inputPuissance:[null===(p=this.infoVoiture)||void 0===p?void 0:p.puissance,u.kI.required],inputDetaille:[null===(f=this.infoVoiture)||void 0===f?void 0:f.detaille]}),this.obtenirInformation()}enregistrer(){if(!this.formVoiture.valid)return;let e=new l.qD;e.id=!1===this.isCreation?this.formVoiture.controls.inputId.value:0,e.dateMiseEnCirculation=this.formVoiture.controls.inputDateMiseEnCirculation.value,e.idColeur=this.formVoiture.controls.inputColeur.value,e.idMarque=this.formVoiture.controls.inputMarque.value,e.idModele=this.formVoiture.controls.inputModele.value,e.idStatut=this.formVoiture.controls.inputStatut.value,e.kilometrage=this.formVoiture.controls.inputKilometrage.value,e.name=this.formVoiture.controls.inputName.value,e.puissance=this.formVoiture.controls.inputPuissance.value,this.dialogRef.close(e)}annuler(){this.dialogRef.close(null)}obtenirInformation(){this._services.coleur().subscribe(e=>{this.listeColeurs=e}),this._services.marque().subscribe(e=>{this.listeMarques=e}),this._services.modele().subscribe(e=>{this.listeModeles=e}),this._services.statut().subscribe(e=>{this.listeStatut=e})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(u.qu),s.Y36(a.so),s.Y36(a.WI),s.Y36(l.t6))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-voiture-form"]],decls:65,vars:11,consts:[[1,"w-100",3,"formGroup"],[1,"pt-1","pb-2"],[1,"container"],[1,"row"],[1,"col-12","col-sm-12"],[1,"w-100"],["matInput","","formControlName","inputName","name","inputName","placeholder","Name","required",""],[4,"ngIf"],[1,"col-12","col-sm-6"],["matInput","","formControlName","inputKilometrage","type","number","name","inputKilometrage","placeholder","Kilometrage","required",""],["matInput","","formControlName","inputPuissance","type","number","name","inputPuissance","placeholder","Puissance","required",""],[1,"col-6"],["matInput","","formControlName","inputDateMiseEnCirculation","placeholder","Date Mise EnCirculation","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["inputDateMiseEnCirculationPicker",""],["required","",1,"w-100"],["formControlName","inputColeur","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","inputMarque","required",""],["formControlName","inputModele","required",""],[1,"col-12"],["formControlName","inputStatut","required",""],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(s.TgZ(0,"form",0),s.TgZ(1,"h2"),s._uU(2,"Voiture"),s.qZA(),s._UZ(3,"mat-divider",1),s.TgZ(4,"div",2),s.TgZ(5,"div",3),s.TgZ(6,"div",4),s.TgZ(7,"mat-form-field",5),s._UZ(8,"input",6),s.YNc(9,b,2,0,"mat-error",7),s.qZA(),s.qZA(),s.TgZ(10,"div",8),s.TgZ(11,"mat-form-field",5),s._UZ(12,"input",9),s.YNc(13,A,2,0,"mat-error",7),s.qZA(),s.qZA(),s.TgZ(14,"div",8),s.TgZ(15,"mat-form-field",5),s._UZ(16,"input",10),s.YNc(17,T,2,0,"mat-error",7),s.qZA(),s.qZA(),s.qZA(),s.TgZ(18,"div",3),s.TgZ(19,"div",11),s.TgZ(20,"mat-form-field",5),s._UZ(21,"input",12),s._UZ(22,"mat-datepicker-toggle",13),s._UZ(23,"mat-datepicker",null,14),s.YNc(25,_,2,0,"mat-error",7),s.qZA(),s.qZA(),s.TgZ(26,"div",11),s.TgZ(27,"mat-form-field",15),s.TgZ(28,"mat-label"),s._uU(29,"Coleur"),s.qZA(),s.TgZ(30,"mat-select",16),s.TgZ(31,"mat-option"),s._uU(32,"-- Seleccioner coleur -- "),s.qZA(),s.YNc(33,k,2,2,"mat-option",17),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(34,"div",3),s.TgZ(35,"div",11),s.TgZ(36,"mat-form-field",15),s.TgZ(37,"mat-label"),s._uU(38,"Coleur"),s.qZA(),s.TgZ(39,"mat-select",18),s.TgZ(40,"mat-option"),s._uU(41,"-- Seleccioner Marque -- "),s.qZA(),s.YNc(42,C,2,2,"mat-option",17),s.qZA(),s.qZA(),s.qZA(),s.TgZ(43,"div",11),s.TgZ(44,"mat-form-field",15),s.TgZ(45,"mat-label"),s._uU(46,"Coleur"),s.qZA(),s.TgZ(47,"mat-select",19),s.TgZ(48,"mat-option"),s._uU(49,"-- Seleccioner Modeles -- "),s.qZA(),s.YNc(50,N,2,2,"mat-option",17),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(51,"div",3),s.TgZ(52,"div",20),s.TgZ(53,"mat-form-field",15),s.TgZ(54,"mat-label"),s._uU(55,"Statut"),s.qZA(),s.TgZ(56,"mat-select",21),s.YNc(57,U,2,2,"mat-option",17),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(58,"div",3),s.TgZ(59,"div",11),s.TgZ(60,"button",22),s.NdJ("click",function(){return t.enregistrer()}),s._uU(61,"Enregistrer"),s.qZA(),s.qZA(),s.TgZ(62,"div",11),s.TgZ(63,"button",23),s.NdJ("click",function(){return t.annuler()}),s._uU(64,"Cancel"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.MAs(24);s.Q6J("formGroup",t.formVoiture),s.xp6(9),s.Q6J("ngIf",t.formVoiture.controls.inputName.hasError("required")),s.xp6(4),s.Q6J("ngIf",t.formVoiture.controls.inputKilometrage.hasError("required")),s.xp6(4),s.Q6J("ngIf",t.formVoiture.controls.inputPuissance.hasError("required")),s.xp6(4),s.Q6J("matDatepicker",e),s.xp6(1),s.Q6J("for",e),s.xp6(3),s.Q6J("ngIf",t.formVoiture.controls.inputDateMiseEnCirculation.hasError("required")),s.xp6(8),s.Q6J("ngForOf",t.listeColeurs),s.xp6(9),s.Q6J("ngForOf",t.listeMarques),s.xp6(8),s.Q6J("ngForOf",t.listeModeles),s.xp6(7),s.Q6J("ngForOf",t.listeStatut)}},directives:[u._Y,u.JL,u.sg,c.d,m.KE,d.Nt,u.Fj,u.JJ,u.u,u.Q7,r.O5,u.wV,p.hl,p.nW,m.R9,p.Mq,m.hX,h.gD,q.ey,r.sg,f.lW,m.TO],styles:[""]}),e})();var J=i(4286),D=i(3175),V=i(1089);function I(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",16),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw().deleteVoiture(t)}),s._uU(1,"Supprimer"),s.qZA()}}function x(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",16),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw().onCreateReserve(t)}),s._uU(1,"Reserver"),s.qZA()}}function w(e,t){if(1&e&&(s.YNc(0,I,2,0,"button",15),s.YNc(1,x,2,0,"button",15)),2&e){const e=t.$implicit,i=s.oxw();s.Q6J("ngIf",i.isManager&&e.estReserve),s.xp6(1),s.Q6J("ngIf",e.estReserve)}}const Q=[{path:"Voiture",component:(()=>{class e{constructor(e,t,i){this.dialogService=e,this._service=t,this._authenticationCoreService=i,this.dataSource=[],this.isManager=!1,i.obtenirOperateurFromToken().then(e=>{this.isManager=1===(null==e?void 0:e.idProfil),console.log(this.isManager)})}ngOnInit(){this.obtenirVoitures()}obtenirVoitures(){this._service.voiture().subscribe(e=>{this.dataSource=e.map(e=>new n.f(e))})}editDetail(e){const t=new a.vA;t.disableClose=!0,t.autoFocus=!0,t.minWidth="50vw",t.maxWidth="92vw",t.data=e,this.dialogService.open(M,t).afterClosed().subscribe(e=>{e&&this._service.ajouterVoiture(e).subscribe(e=>{e&&this.obtenirVoitures()})})}deleteVoiture(e){this._service.supprimerVoiture(e.id).subscribe(e=>{this.obtenirVoitures()})}onCreateReserve(e){const t=new a.vA;t.disableClose=!0,t.autoFocus=!0,t.minWidth="50vw",t.maxWidth="92vw",t.data=e,this.dialogService.open(v,t).afterClosed().subscribe(t=>{t&&(t.idVoiture=e.id,this._service.createReserve(t).subscribe(e=>{e&&this.obtenirVoitures()}))})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(a.uw),s.Y36(l.t6),s.Y36(J.$h))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-voiture"]],decls:16,vars:10,consts:[[1,"container","px-0","px-sm-3","pt-sm-4"],[1,"card","mb-3","p-5"],[1,"card-body","sgl-page-text"],["primaryField","id",3,"dataSource","enableFilter","enablePagination","enableSort","enableInsert","onInsert"],["name","id","caption","Code","field","id"],["name","name","caption","Name","field","name"],["name","dateMiseEnCirculation","caption","dateMiseEnCirculation","field","dateMiseEnCirculation",3,"dataType","dataTypeFormat"],["name","marqueName","caption","Marque","field","marqueName"],["name","modeleName","caption","Modele","field","modeleName"],["name","coleurName","caption","Coleur","field","coleurName"],["name","kilometrage","caption","kilometrage","field","kilometrage",3,"dataType"],["name","statutName","caption","Statut","field","statutName"],["name","action",3,"enableEdit","onEdit"],["name","select","caption","",3,"template"],["forcerItemAffectations",""],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click"]],template:function(e,t){if(1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"app-grid-material",3),s.NdJ("onInsert",function(){return t.editDetail(null)}),s._UZ(4,"app-column-material",4),s._UZ(5,"app-column-material",5),s._UZ(6,"app-column-material",6),s._UZ(7,"app-column-material",7),s._UZ(8,"app-column-material",8),s._UZ(9,"app-column-material",9),s._UZ(10,"app-column-material",10),s._UZ(11,"app-column-material",11),s.TgZ(12,"app-column-material",12),s.NdJ("onEdit",function(e){return t.editDetail(e)}),s.qZA(),s._UZ(13,"app-column-material",13),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(14,w,2,2,"ng-template",null,14,s.W1O)),2&e){const e=s.MAs(15);s.xp6(3),s.Q6J("dataSource",t.dataSource)("enableFilter",!0)("enablePagination",!0)("enableSort",!0)("enableInsert",!0),s.xp6(3),s.Q6J("dataType","date")("dataTypeFormat","dd/MM/yyyy"),s.xp6(4),s.Q6J("dataType","number"),s.xp6(2),s.Q6J("enableEdit",t.isManager),s.xp6(1),s.Q6J("template",e)}},directives:[D.x,V.v,r.O5,f.lW],styles:[""]}),e})()},{path:"",redirectTo:"Voiture",pathMatch:"full"}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[o.Bz.forChild(Q)],o.Bz]}),e})();var y=i(5677);let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[r.ez,S,o.Bz,y.m]]}),e})()}}]);